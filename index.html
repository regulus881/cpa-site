<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Games WAM | Catalog</title>
	<meta name="description" content="Browse the latest items in a clean, fast catalog layout.">
	<!-- Favicon -->
	<link rel="icon" href="/logo-icon.svg" type="image/svg+xml">
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-GN1K1JFT39"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-GN1K1JFT39');
	</script>

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

	<style>
		:root{
			--bg:#1a202c;
			--surface:#2d3748;
			--surface-2:#4a5568;
			--surface-3:#718096;
			--text:#ffffff;
			--muted:#a0aec0;
			--border:#4a5568;
			--accent-1:#00b4d8; /* cyan/teal */
			--accent-2:#0096c7; /* darker teal */
			--accent-3:#ff6b35; /* orange */
			--accent-4:#e53e3e; /* red */
			--ring:rgba(0,180,216,.35);
			--badge:#00b4d8;
			--gradient-1:linear-gradient(135deg, #00b4d8, #0096c7);
			--gradient-2:linear-gradient(135deg, #ff6b35, #e53e3e);
			--gradient-3:radial-gradient(120% 120% at 0% 0%, rgba(0,180,216,.2) 0%, transparent 50%);
			--gradient-download:linear-gradient(135deg, #10b981, #059669, #047857);
			--gradient-download-shine:linear-gradient(135deg, #34d399, #10b981, #059669);
			--radius:12px;
		}

		*{margin:0;padding:0;box-sizing:border-box}
		html,body{height:100%}
		body{
			font-family:-apple-system,BlinkMacSystemFont,"Inter","SF Pro Display","SF Pro Text",sans-serif;
			background:var(--bg);
			color:var(--text);
			-webkit-font-smoothing:antialiased;
			-moz-osx-font-smoothing:grayscale;
			line-height:1.5;
			overflow-x:hidden;
		}

		/* Top bar */
		.topbar{
			background:
				linear-gradient(180deg, rgba(0,180,216,0.15), transparent 60%),
				var(--surface);
			border-bottom:1px solid var(--border);
			backdrop-filter:blur(10px);
		}
		.container{
			max-width:1200px;
			margin:0 auto;
			padding:0 16px;
		}
		.nav{
			height:60px;
			display:flex;
			align-items:center;
			justify-content:space-between;
			gap:10px;
		}
		.brand{
			display:flex;
			align-items:center;
			gap:10px;
			text-decoration:none;
			color:var(--text);
			font-weight:800;
			letter-spacing:-0.02em;
		}
		.brand img{
			height:40px;
			width:auto;
		}

		/* Search */
		.search{
			flex:1;
			display:grid;
			grid-template-columns:1fr 110px;
			gap:8px;
			max-width:560px;
			margin:0 0 0 12px;
			width:100%;
			min-width:0;
		}
		.search-input{
			background:rgba(0,180,216,0.1);
			border:1px solid rgba(0,180,216,0.3);
			height:42px;
			border-radius:12px;
			padding:0 14px;
			color:#ffffff;
			outline:none;
			transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
			min-width:0;
			font-size:14px;
			backdrop-filter:blur(10px);
		}
		.search-input::placeholder{
			color:rgba(255,255,255,0.6);
		}
		.search-input:focus{
			border-color:var(--accent-1);
			box-shadow:0 0 0 3px rgba(0,180,216,.2);
			background:rgba(0,180,216,0.15);
		}
		.search-btn{
			height:42px;
			border:none;cursor:pointer;
			border-radius:12px;
			color:#fff;font-weight:700;letter-spacing:.01em;
			background:var(--gradient-1);
			box-shadow:0 8px 22px rgba(0,180,216,.4);
			transition:transform .15s ease, box-shadow .15s ease;
		}
		.search-btn:hover{
			transform:translateY(-1px);
			box-shadow:0 12px 28px rgba(0,180,216,.5);
		}
		.search-btn:active{
			transform:translateY(0);
		}

		/* Hero slider */
		.hero{
			background:var(--surface);
			border-bottom:1px solid var(--border);
		}
		.hero-wrap{padding:12px 0 16px}
		.slider{
			position:relative;overflow:hidden;border-radius:16px;border:1px solid var(--border);
			background:var(--surface-2);isolation:isolate;
		}
		.slider::before{
			content:"";position:absolute;inset:-2px;
			background:conic-gradient(from 180deg at 50% 50%, rgba(0,180,216,.4), rgba(0,150,199,.4), rgba(255,107,53,.4), rgba(0,180,216,.4));
			filter:blur(20px);z-index:-1;opacity:.6;animation:spin 15s linear infinite;
		}
		@keyframes spin { to { transform: rotate(360deg) } }

		.slides{
			display:flex;will-change:transform;
			transition:transform 420ms cubic-bezier(.22,.61,.36,1);
			touch-action:pan-y;
		}
		.slide{
			min-width:100%;
			aspect-ratio:21/9;
			background:
				var(--gradient-3),
				radial-gradient(120% 120% at 100% 0%, rgba(255,107,53,.15) 0%, transparent 52%),
				linear-gradient(135deg, #2d3748, #4a5568);
			position:relative;overflow:hidden;
			background-size:cover;background-position:center;
		}
		.slide::after{
			content:"";position:absolute;inset:0;
			background:linear-gradient(to top, rgba(26,32,44,.6), rgba(26,32,44,0) 60%);
		}
		.slider-nav{
			position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;
			padding:0 6px;pointer-events:none;
		}
		.nav-btn{
			pointer-events:auto;width:36px;height:36px;border-radius:999px;border:1px solid var(--border);
			background:rgba(45,55,72,.8);color:#fff;display:flex;align-items:center;justify-content:center;
			cursor:pointer;backdrop-filter:blur(8px);
			transition:transform .15s ease, background .2s ease, border-color .2s ease;
		}
		.nav-btn:hover{
			border-color:var(--accent-1);
			background:rgba(0,180,216,.2);
		}
		.nav-btn:active{transform:scale(.96)}
		.dots{
			position:absolute;left:0;right:0;bottom:10px;
			display:flex;gap:6px;justify-content:center;align-items:center;
		}
		.dot{
			width:8px;height:8px;border-radius:999px;background:#718096;border:1px solid var(--border);
			transition:width .2s ease, background .2s ease;cursor:pointer;
		}
		.dot.active{width:20px;background:var(--gradient-1);border-color:var(--accent-1)}

		/* Page */
		.page{padding:16px 0 36px}
		.section{display:flex;align-items:center;justify-content:space-between;margin:6px 0 14px}
		.section-title{font-size:20px;font-weight:800;letter-spacing:-0.02em;color:#fff}
		.section-sub{color:var(--muted);font-size:13px}

		/* Grid - Updated card structure with download button */
		.grid{
			display:grid;
			grid-template-columns:repeat(auto-fill,minmax(231px,1fr));
			gap:12px;
		}
		.card{
			background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);
			overflow:hidden;position:relative;transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
			will-change:transform;
			display:flex;
			flex-direction:column;
		}
		.card:hover{
			transform:translateY(-3px);
			border-color:var(--accent-1);
			box-shadow:
				0 10px 28px rgba(0,0,0,.4), 
				0 0 0 1px rgba(0,180,216,.3) inset,
				0 0 20px rgba(0,180,216,.2);
		}
		.poster{
			aspect-ratio:231/87; /* Steam capsule ratio */
			background:
				var(--gradient-3),
				radial-gradient(120% 120% at 100% 0%, rgba(255,107,53,.12) 0%, transparent 52%),
				linear-gradient(135deg, #2d3748, #4a5568);
			position:relative;
			display:flex;
			align-items:center;
			justify-content:center;
		}
		.badge{
			position:absolute;top:6px;left:6px;
			background:var(--gradient-2);
			color:#fff;font-weight:800;font-size:10px;padding:4px 6px;border-radius:6px;
			letter-spacing:.04em;opacity:0;
			box-shadow:0 4px 12px rgba(255,107,53,.4);
		}
		.overlay{
			position:absolute;inset:0;
			background:linear-gradient(to top, rgba(26,32,44,.6), rgba(26,32,44,0) 60%);
			opacity:0;transition:opacity .18s ease;
		}
		.card:hover .overlay{opacity:1}
		.meta{
			position:absolute;
			bottom:0;
			left:0;
			right:0;
			padding:6px 8px 6px;
			background:linear-gradient(to top, rgba(26,32,44,.9), transparent);
			opacity:0;
			transition:opacity .18s ease;
		}
		.card:hover .meta{opacity:1}
		.title{
			font-size:12px;
			font-weight:600;
			color:var(--text);
			overflow:hidden;
			text-overflow:ellipsis;
			white-space:nowrap;
		}

		/* Enhanced Download Button Styles with Continuous Shine */
		.card-content {
			flex: 1;
			padding: 12px;
			display: flex;
			flex-direction: column;
			gap: 8px;
		}

		.card-title {
			font-size: 14px;
			font-weight: 600;
			color: var(--text);
			margin: 0;
		}

		.download-btn {
			position: relative;
			background: var(--gradient-download);
			border: none;
			border-radius: 8px;
			padding: 10px 16px;
			color: #ffffff;
			font-weight: 700;
			font-size: 13px;
			cursor: pointer;
			overflow: hidden;
			transition: all 0.3s ease;
			text-transform: uppercase;
			letter-spacing: 0.5px;
			box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 6px;
		}

		/* Continuous shine animation */
		.download-btn::before {
			content: '';
			position: absolute;
			top: -50%;
			left: -150%;
			width: 100%;
			height: 200%;
			background: linear-gradient(
				45deg,
				transparent 30%,
				rgba(255, 255, 255, 0.6) 50%,
				transparent 70%
			);
			transform: rotate(45deg);
			animation: continuous-shine 2s linear infinite;
		}

		@keyframes continuous-shine {
			0% {
				left: -150%;
				opacity: 0;
			}
			20% {
				opacity: 1;
			}
			80% {
				opacity: 1;
			}
			100% {
				left: 150%;
				opacity: 0;
			}
		}

		.download-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(16, 185, 129, 0.6);
			background: var(--gradient-download-shine);
		}

		.download-btn:active {
			transform: translateY(0);
			box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
		}

		.download-icon {
			width: 16px;
			height: 16px;
			fill: currentColor;
		}

		/* Enhanced pulse animation */
		.download-btn::after {
			content: '';
			position: absolute;
			inset: -2px;
			border-radius: 10px;
			background: var(--gradient-download);
			z-index: -1;
			opacity: 0;
			animation: enhanced-pulse 3s infinite;
		}

		@keyframes enhanced-pulse {
			0% {
				transform: scale(1);
				opacity: 0;
			}
			30% {
				transform: scale(1.02);
				opacity: 0.2;
			}
			60% {
				transform: scale(1.05);
				opacity: 0.4;
			}
			100% {
				transform: scale(1.08);
				opacity: 0;
			}
		}

		.tags,.actions{display:none}

		/* Enhanced Pager */
		.pager{
			margin-top:18px;
			display:flex;
			justify-content:center;
			gap:8px;
			flex-wrap: wrap;
		}
		.page-btn{
			background:var(--surface);color:var(--muted);border:1px solid var(--border);
			height:40px;min-width:40px;border-radius:10px;padding:0 12px;cursor:pointer;
			transition:all .18s ease;
			font-weight: 600;
		}
		.page-btn:hover{
			border-color:var(--accent-1);
			color:#f9fafb;
			background:rgba(0,180,216,.1);
		}
		.page-btn.active{
			color:#fff;border-color:transparent;
			background:var(--gradient-1);
			box-shadow:0 4px 12px rgba(0,180,216,.3);
		}

		/* Footer */
		.footer{
			margin-top:28px;background:var(--surface);border-top:1px solid var(--border);
			padding:22px 0 26px;color:var(--muted);text-align:center;
		}
		.foot-links{display:flex;justify-content:center;gap:16px;flex-wrap:wrap;margin-bottom:10px}
		.foot-links a{color:#d1d5db;text-decoration:none;font-size:13px;transition:color .2s ease}
		.foot-links a:hover{color:var(--accent-1)}

		/* VPN Block */
		.vpn-block{
			position:fixed;inset:0;
			background:linear-gradient(135deg,#7c3aed,#a855f7);
			color:#fff;display:none;align-items:center;justify-content:center;z-index:99999;text-align:center;padding:20px;
		}
		.vpn-block-content{max-width:600px}
		.vpn-block h1{font-size:2.1rem;margin-bottom:12px;font-weight:800}
		.vpn-block p{opacity:.95}

		/* Popup */
		.popup-overlay{
			position:fixed;inset:0;background:rgba(26,32,44,.9);backdrop-filter:blur(12px);
			z-index:10000;display:none;align-items:center;justify-content:center;
		}
		.popup-overlay.show{display:flex}
		.popup-content{
			background:#fff;border-radius:20px;width:600px;max-width:92vw;height:520px;max-height:85vh;
			position:relative;overflow:hidden;
			box-shadow:0 25px 50px rgba(0,0,0,.6), 0 0 0 1px rgba(0,180,216,.3);
		}
		.popup-close{
			position:absolute;top:12px;right:12px;width:32px;height:32px;border-radius:50%;
			border:none;background:rgba(0,0,0,.08);cursor:pointer;color:#333;font-size:18px;
		}
		.popup-iframe{width:100%;height:100%;border:none}

		/* Motion preferences */
		@media (prefers-reduced-motion: reduce){
			.slides{transition:none}
			.slider::before{animation:none}
			.card:hover{transform:none}
			.download-btn:hover{transform:none}
			.download-btn::before{animation:none !important}
			.download-btn::after{animation:none}
		}

		/* Responsive */
		@media (max-width:768px){
			.container{padding:0 14px}
			.nav{
				gap:8px;
				flex-wrap:wrap;
				min-height:110px;
				align-items:flex-start;
				padding:12px 0;
			}
			.brand{
				flex:0 0 auto;
				margin-top:4px;
			}
			.brand img{
				height:32px;
			}
			.hero-wrap{padding:10px 0 12px}
			.search{
				flex:1 0 100%;
				order:2;
				margin:16px 0 0 0;
				max-width:none;
				grid-template-columns:1fr 75px;
			}
			.search-input{height:40px}
			.search-btn{height:40px;font-size:13px;padding:0 8px}
			.grid{grid-template-columns:repeat(2,1fr);gap:10px}
			.section{margin:4px 0 10px}
			.section-title{font-size:18px}
			.card:hover{transform:translateY(-2px)}
			.card-content{padding:8px}
			.download-btn{padding:8px 12px;font-size:12px}
		}

		@media (max-width:520px){
			.container{padding:0 12px}
			.nav{
				min-height:120px;
				padding:12px 0 8px 0;
			}
			.search{
				grid-template-columns:1fr;
				gap:8px;
				margin:18px 0 0 0;
			}
			.search-btn{
				width:100%;
				font-size:16px;
			}
			.grid{grid-template-columns:1fr;gap:10px}
			.brand{gap:8px}
			.brand img{
				height:28px;
			}
			.card-content{padding:10px}
			.download-btn{padding:10px 16px;font-size:13px}
		}
	</style>
</head>
<body>

	<!-- VPN Block Screen -->
	<div class="vpn-block" id="vpnBlock">
		<div class="vpn-block-content">
			<h1>Access Blocked</h1>
			<p>VPN or Proxy connections are not allowed on this site.</p>
			<p>Please disable your VPN/Proxy and refresh the page to continue.</p>
		</div>
	</div>

	<!-- Topbar -->
	<header class="topbar">
		<div class="container">
			<div class="nav">
				<a class="brand" href="#">
					<img src="/logo-horizontal.svg" alt="Games WAM" height="40">
				</a>
				<div class="search">
					<input id="mainSearch" class="search-input" type="text" placeholder="Search games..." />
					<button class="search-btn" onclick="performSearch()">Search</button>
				</div>
			</div>
		</div>
	</header>

	<!-- Hero slider -->
	<section class="hero">
		<div class="container hero-wrap">
			<div class="slider" id="slider">
				<div class="slides" id="slides">
					<div class="slide" data-bg=""></div>
					<div class="slide" data-bg=""></div>
					<div class="slide" data-bg=""></div>
				</div>
				<div class="slider-nav">
					<button class="nav-btn" id="prev" aria-label="Previous">â€¹</button>
					<button class="nav-btn" id="next" aria-label="Next">â€º</button>
				</div>
				<div class="dots" id="dots"></div>
			</div>
		</div>
	</section>

	<!-- Page -->
	<main class="page">
		<div class="container">
			<div class="section">
				<div class="section-title">Latest Updates</div>
				<div class="section-sub">Fresh content with a clean, fast layout</div>
			</div>

			<div class="grid" id="grid"></div>

			<div class="pager" aria-label="Pagination">
				<button class="page-btn" onclick="changePage('prev')">Â«</button>
				<button class="page-btn active" onclick="changePage(1)" data-page="1">1</button>
				<button class="page-btn" onclick="changePage(2)" data-page="2">2</button>
				<button class="page-btn" onclick="changePage(3)" data-page="3">3</button>
				<button class="page-btn" onclick="changePage(4)" data-page="4">4</button>
				<button class="page-btn" onclick="changePage(5)" data-page="5">5</button>
				<button class="page-btn" onclick="changePage('next')">Â»</button>
			</div>
		</div>
	</main>

	<!-- Content Locker Popup -->
	<div class="popup-overlay" id="contentLockerPopup">
		<div class="popup-content">
			<button class="popup-close" onclick="closeContentLocker()">Ã—</button>
			<iframe id="contentLockerFrame" class="popup-iframe" src=""></iframe>
		</div>
	</div>

	<!-- Footer -->
	<footer class="footer">
		<div class="container">
			<div class="foot-links">
				<a href="#" onclick="showInfo('contact')">Contact</a>
				<a href="#" onclick="showInfo('privacy')">Privacy</a>
				<a href="#" onclick="showInfo('terms')">Terms</a>
				<a href="#" onclick="showInfo('about')">About</a>
			</div>
			<div>&copy; 2024 Games WAM. All rights reserved.</div>
		</div>
	</footer>

	<script>
		/* Enhanced VPN Detection - Cross-browser compatible */
		(function() {
			'use strict';
			
			const vpnDetector = {
				blocked: false,
				detectionScore: 0,
				detectionCount: 0,
				
				// Configuration
				config: {
					scoreThreshold: 0.5,
					countThreshold: 2,
					timeout: 8000,
					apis: [
						{ url: 'https://api.ipify.org?format=json', parser: data => data.ip },
						{ url: 'https://ipapi.co/json/', parser: data => data.ip },
						{ url: 'https://httpbin.org/ip', parser: data => data.origin.split(',')[0] }
					]
				},
				
				// Get user IP address
				async getUserIP() {
					for (const api of this.config.apis) {
						try {
							const controller = new AbortController();
							const timeoutId = setTimeout(() => controller.abort(), this.config.timeout);
							
							const response = await fetch(api.url, { 
								signal: controller.signal,
								headers: { 'Accept': 'application/json' }
							});
							
							clearTimeout(timeoutId);
							
							if (response.ok) {
								const data = await response.json();
								const ip = api.parser(data);
								if (this.isValidIP(ip)) return ip;
							}
						} catch (error) {
							console.debug('IP fetch failed:', error.message);
							continue;
						}
					}
					return null;
				},
				
				// Validate IP format
				isValidIP(ip) {
					const ipv4Regex = /^(\d{1,3}\.){3}\d{1,3}$/;
					const ipv6Regex = /^([0-9a-f]{1,4}:){7}[0-9a-f]{1,4}$/i;
					return ipv4Regex.test(ip) || ipv6Regex.test(ip);
				},
				
				// Check for WebRTC leaks
				async checkWebRTCLeak() {
					return new Promise((resolve) => {
						try {
							const rtc = new RTCPeerConnection({
								iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
							});
							
							let localIPs = new Set();
							let resolved = false;
							
							const timeout = setTimeout(() => {
								if (!resolved) {
									resolved = true;
									rtc.close();
									resolve(false);
								}
							}, 3000);
							
							rtc.onicecandidate = (event) => {
								if (event.candidate && !resolved) {
									const match = event.candidate.candidate.match(/(\d+\.\d+\.\d+\.\d+)/);
									if (match) {
										const ip = match[1];
										if (!ip.startsWith('127.') && !ip.startsWith('169.254.') && !ip.startsWith('192.168.')) {
											localIPs.add(ip);
										}
									}
									
									if (localIPs.size > 1) {
										resolved = true;
										clearTimeout(timeout);
										rtc.close();
										resolve(true);
									}
								}
							};
							
							rtc.createDataChannel('test');
							rtc.createOffer()
								.then(offer => rtc.setLocalDescription(offer))
								.catch(() => {
									if (!resolved) {
										resolved = true;
										clearTimeout(timeout);
										resolve(false);
									}
								});
								
						} catch (error) {
							resolve(false);
						}
					});
				},
				
				// Check timezone inconsistencies
				checkTimezone() {
					try {
						const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
						const offset = new Date().getTimezoneOffset();
						
						// Common timezone/offset mismatches that indicate VPN
						const suspiciousPatterns = [
							{ tz: 'America/New_York', expectedOffset: [240, 300] },
							{ tz: 'Europe/London', expectedOffset: [0, -60] },
							{ tz: 'Asia/Tokyo', expectedOffset: [-540] }
						];
						
						for (const pattern of suspiciousPatterns) {
							if (timezone.includes(pattern.tz.split('/')[1])) {
								if (!pattern.expectedOffset.includes(offset)) {
									return true;
								}
							}
						}
						
						return false;
					} catch (error) {
						return false;
					}
				},
				
				// Check language/location mismatch
				checkLanguageLocation() {
					try {
						const languages = navigator.languages || [navigator.language];
						const primaryLang = languages[0];
						const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
						
						const locationPatterns = {
							'en-US': /America\/(New_York|Chicago|Denver|Los_Angeles|Phoenix)/,
							'en-GB': /Europe\/London/,
							'de': /Europe\/(Berlin|Vienna|Zurich)/,
							'fr': /Europe\/Paris/,
							'es': /Europe\/Madrid/,
							'it': /Europe\/Rome/,
							'ja': /Asia\/Tokyo/,
							'ko': /Asia\/Seoul/,
							'zh': /Asia\/(Shanghai|Beijing|Hong_Kong)/
						};
						
						const pattern = locationPatterns[primaryLang];
						if (pattern && timezone && !pattern.test(timezone)) {
							// Additional check: if language is very specific but timezone doesn't match
							if (primaryLang.includes('-') && !timezone.includes('GMT')) {
								return true;
							}
						}
						
						return false;
					} catch (error) {
						return false;
					}
				},
				
				// Check DNS leak
				async checkDNSLeak() {
					try {
						const controller = new AbortController();
						const timeoutId = setTimeout(() => controller.abort(), 4000);
						
						// Use multiple DNS leak detection methods
						const tests = [
							fetch('https://1.1.1.1/cdn-cgi/trace', { signal: controller.signal }),
							fetch('https://ipinfo.io/json', { signal: controller.signal })
						];
						
						const results = await Promise.allSettled(tests);
						clearTimeout(timeoutId);
						
						for (const result of results) {
							if (result.status === 'fulfilled' && result.value.ok) {
								const text = await result.value.text();
								// Look for VPN/proxy indicators in response
								if (text.includes('vpn') || text.includes('proxy') || text.includes('tor')) {
									return true;
								}
							}
						}
						
						return false;
					} catch (error) {
						return false;
					}
				},
				
				// Check canvas fingerprint changes
				checkCanvasFingerprint() {
					try {
						const canvas = document.createElement('canvas');
						const ctx = canvas.getContext('2d');
						canvas.width = 200;
						canvas.height = 50;
						
						ctx.textBaseline = 'top';
						ctx.font = '14px Arial';
						ctx.fillStyle = '#f60';
						ctx.fillRect(125, 1, 62, 20);
						ctx.fillStyle = '#069';
						ctx.fillText('VPN Test ðŸ”’ðŸŒ', 2, 15);
						ctx.fillStyle = 'rgba(102, 204, 0, 0.7)';
						ctx.fillText('VPN Test ðŸ”’ðŸŒ', 4, 17);
						
						const fingerprint = canvas.toDataURL();
						const storageKey = '_canvas_fp';
						
						// Use in-memory storage to avoid localStorage issues
						let storedFingerprint = window._canvasFingerprint;
						
						if (storedFingerprint && storedFingerprint !== fingerprint) {
							return true;
						}
						
						// Store current fingerprint in memory
						window._canvasFingerprint = fingerprint;
						
						return false;
					} catch (error) {
						return false;
					}
				},
				
				// Main detection function
				async runDetection() {
					try {
						console.debug('Starting VPN detection...');
						
						// Get user IP first
						const userIP = await this.getUserIP();
						if (!userIP) {
							console.debug('Could not determine user IP');
							return;
						}
						
						console.debug('User IP detected:', userIP);
						
						// Run all detection methods
						const [webRTCLeak, timezoneIssue, languageIssue, dnsLeak, canvasChanged] = await Promise.allSettled([
							this.checkWebRTCLeak(),
							Promise.resolve(this.checkTimezone()),
							Promise.resolve(this.checkLanguageLocation()),
							this.checkDNSLeak(),
							Promise.resolve(this.checkCanvasFingerprint())
						]);
						
						// Calculate detection score
						const detectionResults = [
							{ name: 'WebRTC Leak', result: webRTCLeak, weight: 0.4 },
							{ name: 'Timezone Mismatch', result: timezoneIssue, weight: 0.2 },
							{ name: 'Language Mismatch', result: languageIssue, weight: 0.2 },
							{ name: 'DNS Leak', result: dnsLeak, weight: 0.3 },
							{ name: 'Canvas Changed', result: canvasChanged, weight: 0.3 }
						];
						
						let totalScore = 0;
						let detectedCount = 0;
						
						detectionResults.forEach(test => {
							const detected = test.result.status === 'fulfilled' && test.result.value;
							console.debug(`${test.name}: ${detected ? 'DETECTED' : 'OK'}`);
							
							if (detected) {
								totalScore += test.weight;
								detectedCount++;
							}
						});
						
						this.detectionScore = totalScore;
						this.detectionCount = detectedCount;
						
						console.debug(`Detection Score: ${totalScore.toFixed(2)}, Count: ${detectedCount}`);
						
						// Block if threshold exceeded
						if (totalScore >= this.config.scoreThreshold || detectedCount >= this.config.countThreshold) {
							this.blockAccess();
						}
						
					} catch (error) {
						console.debug('VPN detection error:', error);
					}
				},
				
				// Block access
				blockAccess() {
					if (this.blocked) return;
					
					this.blocked = true;
					console.debug('Access blocked - VPN/Proxy detected');
					
					const blockElement = document.getElementById('vpnBlock');
					if (blockElement) {
						blockElement.style.display = 'flex';
						document.body.style.overflow = 'hidden';
					}
				},
				
				// Initialize detection
				init() {
					if (document.readyState === 'loading') {
						document.addEventListener('DOMContentLoaded', () => {
							setTimeout(() => this.runDetection(), 500);
						});
					} else {
						setTimeout(() => this.runDetection(), 500);
					}
				}
			};
			
			// Start VPN detection
			vpnDetector.init();
		})();

		/* App logic */
		let currentPage = 1;
		let totalPages = 5;
		
		// Game data for all pages - Updated to show only 10 games per page
		const gameData = {
			1: [
				{ name: 'Action Hero Legacy', category: 'action', isNew: true },
				{ name: 'Desert Storm Elite', category: 'action', isUpdated: true },
				{ name: 'Racing Thunder Pro', category: 'racing', isNew: false },
				{ name: 'City Builder Ultimate', category: 'strategy', isUpdated: true },
				{ name: 'Puzzle Quest Adventure', category: 'puzzle', isNew: false },
				{ name: 'Space Adventure Odyssey', category: 'adventure', isNew: true },
				{ name: 'Football Manager 2024', category: 'sports', isUpdated: false },
				{ name: 'Card Battle Arena', category: 'strategy', isNew: false },
				{ name: 'RPG World Chronicles', category: 'adventure', isUpdated: true },
				{ name: 'Platformer Paradise', category: 'casual', isNew: false }
			],
			2: [
				{ name: 'Tower Defense Pro', category: 'strategy', isNew: true },
				{ name: 'Match Three Deluxe', category: 'puzzle', isUpdated: false },
				{ name: 'Racing Circuit Champion', category: 'racing', isNew: false },
				{ name: 'Combat Zone Warfare', category: 'action', isUpdated: true },
				{ name: 'Magic Quest Origins', category: 'adventure', isNew: true },
				{ name: 'Sports Champion League', category: 'sports', isUpdated: false },
				{ name: 'Strategy War Commander', category: 'strategy', isNew: false },
				{ name: 'Adventure Island Explorer', category: 'adventure', isUpdated: true },
				{ name: 'Cyberpunk Neon City', category: 'action', isNew: true },
				{ name: 'Medieval Kingdom Builder', category: 'strategy', isUpdated: false }
			],
			3: [
				{ name: 'Ocean Racing Simulator', category: 'racing', isNew: false },
				{ name: 'Horror Survival Night', category: 'adventure', isUpdated: true },
				{ name: 'Math Puzzle Challenge', category: 'puzzle', isNew: false },
				{ name: 'Jungle Adventure Quest', category: 'adventure', isNew: true },
				{ name: 'Basketball Pro League', category: 'sports', isUpdated: false },
				{ name: 'Chess Master Online', category: 'strategy', isNew: false },
				{ name: 'Fantasy RPG Legends', category: 'adventure', isUpdated: true },
				{ name: 'Retro Arcade Collection', category: 'casual', isNew: true },
				{ name: 'Defense Shield Pro', category: 'strategy', isUpdated: false },
				{ name: 'Word Puzzle Master', category: 'puzzle', isNew: false }
			],
			4: [
				{ name: 'Formula Racing Elite', category: 'racing', isUpdated: true },
				{ name: 'Sniper Elite Mission', category: 'action', isNew: true },
				{ name: 'Wizard Magic Academy', category: 'adventure', isUpdated: false },
				{ name: 'Tennis World Tour', category: 'sports', isNew: false },
				{ name: 'Empire Strategy Game', category: 'strategy', isUpdated: true },
				{ name: 'Treasure Hunt Island', category: 'adventure', isNew: true },
				{ name: 'Mech Warrior Battle', category: 'action', isUpdated: true },
				{ name: 'Farm Life Simulator', category: 'casual', isNew: false },
				{ name: 'Street Racing Underground', category: 'racing', isNew: true },
				{ name: 'Detective Mystery Case', category: 'adventure', isUpdated: false }
			],
			5: [
				{ name: 'Brain Training Puzzles', category: 'puzzle', isNew: false },
				{ name: 'Pirate Ship Adventure', category: 'adventure', isUpdated: true },
				{ name: 'Golf Championship Pro', category: 'sports', isNew: true },
				{ name: 'Risk Strategy Board', category: 'strategy', isUpdated: false },
				{ name: 'Dragon Quest Saga', category: 'adventure', isNew: false },
				{ name: 'Bubble Pop Mania', category: 'casual', isUpdated: true },
				{ name: 'Castle Defense Wars', category: 'strategy', isNew: true },
				{ name: 'Sudoku Master Pro', category: 'puzzle', isUpdated: false },
				{ name: 'Monster Truck Rally', category: 'racing', isNew: false },
				{ name: 'Zombie Apocalypse', category: 'action', isUpdated: true }
			]
		};
		
		function performSearch() {
			const q = document.getElementById('mainSearch').value.trim();
			if (!q) { 
				alert('Please enter a search term to continue'); 
				return; 
			}
			alert(`Searching for "${q}"...`);
		}
		
		function openContentLocker(name) {
			const popup = document.getElementById('contentLockerPopup');
			const iframe = document.getElementById('contentLockerFrame');
			iframe.src = 'https://installchecker.com/cl/i/o6wn2d';
			popup.classList.add('show');
			document.body.style.overflow = 'hidden';
			console.log('Opening content locker for', name || 'item');
		}
		
		function closeContentLocker() {
			const popup = document.getElementById('contentLockerPopup');
			const iframe = document.getElementById('contentLockerFrame');
			popup.classList.remove('show'); 
			iframe.src=''; 
			document.body.style.overflow='auto';
		}
		
		document.getElementById('contentLockerPopup').addEventListener('click', function(e) { 
			if (e.target === this) closeContentLocker(); 
		});
		
		document.addEventListener('keydown', function(e) { 
			if (e.key === 'Escape') closeContentLocker(); 
		});
		
		function showInfo(type) { 
			alert('Opening ' + type + ' information...'); 
		}
		
		document.getElementById('mainSearch').addEventListener('keypress', function(e) { 
			if (e.key === 'Enter') performSearch(); 
		});

		// Download button handler
		function handleDownload(gameName, event) {
			event.stopPropagation();
			console.log('Download initiated for:', gameName);
			
			// Add download animation
			const btn = event.target.closest('.download-btn');
			if (btn) {
				const originalText = btn.innerHTML;
				btn.innerHTML = '<svg class="download-icon" viewBox="0 0 24 24"><path d="M12 2L12 14M8 10l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>Downloading...';
				btn.style.background = 'var(--gradient-download-pressed)';
				btn.style.boxShadow = '0 4px 15px rgba(139, 92, 246, 0.4)';
				
				setTimeout(() => {
					btn.innerHTML = originalText;
					btn.style.background = 'var(--gradient-download)';
					btn.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';
					openContentLocker(gameName);
				}, 1500);
			}
		}

		// Page navigation
		function changePage(page) {
			if (page === 'prev') {
				if (currentPage > 1) {
					currentPage--;
				}
			} else if (page === 'next') {
				if (currentPage < totalPages) {
					currentPage++;
				}
			} else {
				currentPage = page;
			}
			
			// Update active page button
			document.querySelectorAll('.page-btn').forEach(btn => {
				btn.classList.remove('active');
				if (btn.dataset.page == currentPage) {
					btn.classList.add('active');
				}
			});
			
			// Populate grid with new page data
			populateGrid(currentPage);
			
			// Smooth scroll to top
			window.scrollTo({ top: 0, behavior: 'smooth' });
		}

		/* Fill grid with cards including download buttons */
		function populateGrid(pageNumber = 1) {
			const grid = document.getElementById('grid');
			const games = gameData[pageNumber] || gameData[1];
			
			// Clear existing content
			grid.innerHTML = '';
			
			const frag = document.createDocumentFragment();
			
			games.forEach((game, i) => {
				const card = document.createElement('div'); 
				card.className = 'card';
				card.setAttribute('data-category', game.category); 
				card.setAttribute('data-new', game.isNew ? '1' : '0'); 
				card.setAttribute('data-updated', game.isUpdated ? '1' : '0');
				
				const poster = document.createElement('div'); 
				poster.className = 'poster';
				
				const overlay = document.createElement('div'); 
				overlay.className = 'overlay'; 
				poster.appendChild(overlay);
				
				const badge = document.createElement('div'); 
				badge.className = 'badge';
				badge.textContent = game.isNew ? 'NEW' : (game.isUpdated ? 'UPDATED' : '');
				if (badge.textContent) badge.style.opacity = '1';
				poster.appendChild(badge);
				
				const meta = document.createElement('div'); 
				meta.className = 'meta';
				const title = document.createElement('div'); 
				title.className = 'title'; 
				title.textContent = game.name;
				meta.appendChild(title);
				
				poster.appendChild(meta);
				
				// Create card content section
				const cardContent = document.createElement('div');
				cardContent.className = 'card-content';
				
				const cardTitle = document.createElement('h3');
				cardTitle.className = 'card-title';
				cardTitle.textContent = game.name;
				
				const downloadBtn = document.createElement('button');
				downloadBtn.className = 'download-btn';
				downloadBtn.innerHTML = `
					<svg class="download-icon" viewBox="0 0 24 24">
						<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" 
							  stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					Download
				`;
				downloadBtn.addEventListener('click', (e) => handleDownload(game.name, e));
				
				cardContent.appendChild(cardTitle);
				cardContent.appendChild(downloadBtn);
				
				card.appendChild(poster); 
				card.appendChild(cardContent);
				
				// Make poster clickable for content locker
				poster.addEventListener('click', () => openContentLocker(game.name));
				poster.style.cursor = 'pointer';
				poster.title = 'Click to view details';
				
				frag.appendChild(card);
			});
			
			grid.appendChild(frag);
		}

		// Initialize with first page
		populateGrid(1);

		/* Hero slider */
		(function setupSlider(){
			const slidesEl = document.getElementById('slides');
			const slides = Array.from(slidesEl.children);
			const dotsEl = document.getElementById('dots');
			const prev = document.getElementById('prev');
			const next = document.getElementById('next');
			let index = 0, autoTimer = null, delay = 4500;

			slides.forEach((_, i) => {
				const d = document.createElement('div');
				d.className = 'dot' + (i===0 ? ' active' : '');
				d.addEventListener('click', () => goTo(i));
				dotsEl.appendChild(d);
			});
			
			function update(){
				slidesEl.style.transform = `translateX(-${index*100}%)`;
				dotsEl.querySelectorAll('.dot').forEach((d,i)=>d.classList.toggle('active', i===index));
				lazy(index);
			}
			
			function goTo(i){ 
				index = (i + slides.length) % slides.length; 
				update(); 
				restart(); 
			}
			
			function nextSlide(){ goTo(index+1) }
			function prevSlide(){ goTo(index-1) }
			function start(){ autoTimer = setInterval(nextSlide, delay) }
			function stop(){ clearInterval(autoTimer) }
			function restart(){ stop(); start() }
			
			function lazy(i){
				const s = slides[i];
				const url = s.getAttribute('data-bg');
				if (url && !s.style.backgroundImage){ 
					s.style.backgroundImage = `url('${url}')`; 
				}
			}
			
			lazy(0);
			next.addEventListener('click', nextSlide);
			prev.addEventListener('click', prevSlide);
			
			let startX = 0, dx = 0, isDown = false;
			slidesEl.addEventListener('pointerdown', (e)=>{ 
				isDown=true; 
				startX=e.clientX; 
				dx=0; 
				stop(); 
				slidesEl.setPointerCapture(e.pointerId); 
			});
			
			slidesEl.addEventListener('pointermove', (e)=>{ 
				if(!isDown) return; 
				dx=e.clientX-startX; 
				slidesEl.style.transform=`translateX(calc(-${index*100}% + ${dx}px))`; 
			});
			
			slidesEl.addEventListener('pointerup', (e)=>{ 
				if(!isDown) return; 
				isDown=false; 
				slidesEl.releasePointerCapture(e.pointerId); 
				if (Math.abs(dx) > 60){ 
					dx<0 ? nextSlide() : prevSlide(); 
				} else { 
					update(); 
					start(); 
				} 
			});
			
			slidesEl.addEventListener('pointercancel', ()=>{ 
				isDown=false; 
				update(); 
				start(); 
			});
			
			slidesEl.addEventListener('mouseenter', stop);
			slidesEl.addEventListener('mouseleave', start);
			start();
			
			window.addEventListener('visibilitychange', ()=>{ 
				document.hidden ? stop() : start(); 
			});
		})();
	</script>
</body>
</html>
